

<!DOCTYPE html>
<html>
 
<head>
    <title>Page Layout</title>
    <link rel="stylesheet" href="./@zoom/videosdk-ui-toolkit/dist/videosdk-ui-toolkit.css">
    <script src="./@zoom/videosdk-ui-toolkit/index.js" type="module"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.9.0/jsrsasign-all-min.js" ></script>
    <script src="main.js" type="module"></script>
    <script type="module">
      import uitoolkit from './@zoom/videosdk-ui-toolkit/index.js'
   window.uitoolkitWindow = uitoolkit
    
      </script>
</head>
 
<body>
<script>
 function generateSignature(sdkKey, sdkSecret, sessionName, role) {

const iat = Math.round(new Date().getTime() / 1000) - 30
const exp = iat + 60 * 60 * 2
const oHeader = { alg: 'HS256', typ: 'JWT' }

const oPayload = {
  app_key: sdkKey,
  tpc: sessionName,
  role_type: role,
  version: 1,
  iat: iat,
  exp: exp
}

const sHeader = JSON.stringify(oHeader)
const sPayload = JSON.stringify(oPayload)
const sdkJWT = window.KJUR.jws.JWS.sign('HS256', sHeader, sPayload, sdkSecret)
return sdkJWT
}

 var config = {
     videoSDKJWT: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfa2V5IjoiM0VaWW5STDRtMnNnaUVvY1N2VHY1SHdwbjBQUXo1SzNWQjVLIiwiaWF0IjoxNzA0Mzk4ODE3LCJleHAiOjE3MDQ0MDI0MTcsInRwYyI6IkNvb2wgQ2FycyIsInVzZXJfaWRlbnRpdHkiOiJ1c2VyMTIzIiwic2Vzc2lvbl9rZXkiOiJzZXNzaW9uMTIzIiwicm9sZV90eXBlIjoxfQ.F0Q6I14bbU_9j8jeCzUUalGvSw2h2xd7j2ghOPEhrZg',
     sessionName: 'SessionA',
     userName: 'UserA',
     sessionPasscode: 'abc123',
     features: ['chat', 'users', 'settings']
     }
     var sessionContainer = document.getElementById('sessionContainer')
     console.log(sessionContainer)
     console.log("works")
     console.log(config)

 
    function testResults(form) {
   console.log(generateSignature(form.clientID.value, form.clientSecret.value, 'Test Session', 1))
     config.videoSDKJWT = generateSignature(form.clientID.value, form.clientSecret.value, 'Test Session', 1)
    window.uitoolkitWindow.joinSession(sessionContainer, config)
}
</script>
  
    <header>
        
    </header>
 
    
    
 
    <!-- Body section -->
    <main class="body_sec">
        <div id='data'>
            <form name="vSDKData" action="" method="GET">
            <label for="fname">Client ID:</label><br>
            <input type="text" id="clientID" name="fname"><br>
            <label for="lname">Client Secret:</label><br>
            <input type="text" id="clientSecret" name="lname"><br><br>
            <input type="button" name="button" value="Click" onClick="testResults(this.form)">
        </form>
        </div>
        <div id='sessionContainer' onload="doThings()"></div>
    </main>
 
    <!-- Footer Section -->
    
</body>
 
</html>
